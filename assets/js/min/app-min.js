jQuery(document).ready(function($){function e(e){this.options={elem:$(".account-login"),btnRaw:".overlayBtn"},this.options.elemOverlay=this.options.elem.find(".overlay"),this.options.overlayBtn=this.options.elem.find(".overlayBtn");var t=this;t.overlayVisible=!1,$.extend(this.options,e);var n=function(){var e=t.options.elemOverlay.data("height");t.overlayVisible=!0,TweenMax.to(t.options.elemOverlay,.6,{height:e,force3D:!0,onComplete:function(){}})},a=function(){t.overlayVisible=!1,TweenMax.to(t.options.elemOverlay,.3,{height:0,force3D:!0,onComplete:function(){}})},o=function(){return t.options.elemOverlay.data("height")||(t.options.elemOverlay.css("display","block"),t.options.elemOverlay.data("height",t.options.elemOverlay.height()),t.options.elemOverlay.css("height",0)),t.options.elemOverlay.data("height")},i=function(){o(),t.options.overlayBtn.on("mouseenter",function(){t.overlayVisible===!1&&n()}),t.options.elem.on("mouseleave",function(){t.overlayVisible===!0&&a()}),t.options.overlayBtn.on("click",function(){t.overlayVisible===!1?n():a()})};i()}var t=t||{};t.SideMenu=function(){var e=$(".secondary-menu"),t=this,n=$("body"),a=$("html"),o=$(".side-menu").find(".dropdown");if(!(e.length<=0)){var i=function(){o.on("mouseenter",function(){s($(this))}).on("mouseleave",function(){l($(this))}),o.children("a").on("click",function(e){e.preventDefault()})},r=function(e){var t=parseInt(n.scrollTop()),o=parseInt(a.get(0).clientHeight),i=parseInt(e.parent().offset().top),r=e.height(),s=i-t;e.css("margin-top",0);var l=s+r>o?!0:!1;l===!1?e.css("margin-top",0):e.css("margin-top",-.5*s)},s=function(e){var t=e,n=t.find("ul");TweenMax.set(n,{display:"block",autoAlpha:0,xPercent:"-10%"}),TweenMax.to(n,.3,{autoAlpha:1,xPercent:"0%"}),r(n)},l=function(e){var t=e,n=t.find("ul");TweenMax.to(n,.3,{autoAlpha:0,xPercent:"-10%",onComplete:function(){TweenMax.to(n,.1,{display:"none"})}})};i()}}(),t.nav=function(){var e=$(".nav"),t=$(".menu-wrapper"),n=new TimelineMax({yoyo:!0,paused:!0});n.set(e,{display:"block",autoAlpha:0,yPercent:"-10%"}).to(e,1,{autoAlpha:1,yPercent:"0%",ease:Expo.easeInOut});var a=function(){t.on("mouseenter",function(){o()}).on("mouseleave",function(){i()})},o=function(){n.play()},i=function(){n.reverse()};a()}();var n=$(".account-login"),a=new e({elem:n,overlayBtn:n.find(".overlayBtn"),elemOverlay:n.find(".overlay")}),o=$(".mini-cart"),i=new e({elem:o,overlayBtn:o.find(".mini-cart_icon"),elemOverlay:o.find(".mini-cart_overlay")});t.repositionTopMenu=function(){var e=$(".header"),t=e.find(".menu-wrapper"),n=e.find(".nav"),a=parseInt(t.height()+parseInt(e.css("padding-bottom"))),o=$(".secondary-menu").length>0?$(".secondary-menu"):e.width()/4;"Smartphone"===WURFL.form_factor&&(o=e.width()),n.css({top:a,width:o})}();var r=$(".featured-categories").find(".owl-carousel"),s=$(".main-banner");s.owlCarousel({items:1}),WURFL.is_mobile&&"Desktop"!==WURFL.form_factor?r.owlCarousel({lazyLoad:!0,center:!0,loop:!0,dots:!0,animateOut:!0,itemElement:"a",animateIn:!0,responsive:{margin:0,center:!1,0:{items:2,margin:0,center:!1},600:{items:3,center:!1},1e3:{items:5,center:!1}}}):r.removeClass("owl-carousel"),$(".promotion-carousel").owlCarousel({lazyLoad:!0,margin:10,center:!0,loop:!0,autoplay:!0,autoplayHoverPause:!0,smartSpeed:500,fluidSpeed:500,responsiveRefreshRate:10,animateIn:!0,animateOut:!0,responsive:{0:{stagePadding:0,items:2,margin:0,center:!1},600:{items:2,center:!1,stagePadding:0},1e3:{items:3}}});var l=$(".mobile-search-icon"),c=$(".search_wrapper");l.on("click",function(){c.toggleClass("s-hide")}),$(".header").stickyNavbar({animDuration:350,animateCSS:!0,stickyModeClass:"sticky",mobile:!0,zindex:500});var u=$(".newsletterForm");u.on("submit",function(e){var t=$(this),n=t.attr("action"),n=n.replace("newsletter/subscriber/new","newsletter/subscriber/newAjax");data=t.serialize(),$.ajax({url:n,data:data,dataType:"json",method:"POST",beforeSend:function(){t.find('input[name="submit"]').val("...")}}).done(function(e){var t=$(".newsletter-message-box");t.find("p").text(e.message),TweenMax.set(t,{display:"block",autoAlpha:0,yPercent:"30%"}),TweenMax.to(t,1,{autoAlpha:1,yPercent:"0%",ease:Elastic.easeOut}),setTimeout(function(){TweenMax.to(t,1,{autoAlpha:0,yPercent:"30%",ease:Elastic.easeIn})},5e3)}).complete(function(){t.find('input[name="submit"]').val("Signup")}),e.preventDefault()}),$(".newsletter-message-box").find(".closeBtn").on("click",function(){var e=$(this).parent();TweenMax.to(e,1,{autoAlpha:0,yPercent:"30%",ease:Elastic.easeIn})}),$.fn.product=function(){function e(){return h.attr("data-newvalue",parseInt(f.val())),t()}function t(){return h.attr("data-newvalue")}function n(){h.attr("data-oldvalue",parseInt(f.val()))}function a(){return h.attr("data-oldvalue")}function o(e){return e&&parseInt(e)>0?e:1}function i(e){var t={subtract:0,qty:1};$.extend(t,e);for(var n=h.serializeArray(),a=0;a<n.length;a++)"qty"===n[a].name&&(t.qty?n[a].value=t.qty:n[a].value=0);return n.push({name:"isAjax",value:1}),n.push({name:"fromList",value:1}),parseInt(h.attr("updateid"))>0&&n.push({name:"updateid",value:h.attr("updateid")}),1===t.subtract&&n.push({name:"subtract",value:1}),$.param(n)}function r(e){var t=h.attr("action"),n=parseInt(h.find(".product_qty").val());t=t.replace("checkout/cart","ajax/index");try{$.ajax({url:t,dataType:"json",type:"post",data:e,success:function(e){l(e),h.attr("data-added",!0),h.attr("data-lastvalue",n),e.updateId&&h.attr("updateid",e.updateId)}})}catch(a){}}function s(){var e=h.attr("action"),t=h.attr("data-update-url");e=t;var n=h.serialize();n+="&isAjax=1";try{$.ajax({url:e,dataType:"json",type:"post",data:n,success:function(e){}})}catch(a){}}function l(e){$(".mini-cart")&&($(".mini-cart").find(".minicart-count").html($(e.sidebar).find(".minicart-count").html()),$(".mini-cart").find(".mini-cart_overlay").html($(e.sidebar).find(".mini-cart_overlay").html()))}var c=this.find(".icon-add-cart"),u=this.find(".icon-remove"),p=this.find(".icon-add"),d=this.find(".product_form"),f=this.find(".product_qty"),v=this.find(".product_options"),m=this.find(".product_add-cart"),h=this.find("form"),y=function(){TweenMax.to(d,.1,{xPercent:"10%",autoAlpha:0}),TweenMax.to(m,.3,{yPercent:"0%",autoAlpha:1}),v.length>0&&TweenMax.to(v,.6,{autoAlpha:0})},w=function(){TweenMax.to(m,.1,{yPercent:"10%",autoAlpha:0}),TweenMax.fromTo(d,.3,{xPercent:"10%",autoAlpha:0},{xPercent:"0%",autoAlpha:1}),v.length>0&&TweenMax.to(v,.6,{autoAlpha:1})},g=function(){(0===parseInt(f.val())||""===f.val())&&f.val(1),f.val(parseInt(f.val())+1)},x=function(){1===parseInt(f.val())?(y(),setTimeout(function(){f.val(0)},300)):parseInt(f.val())>0&&f.val(parseInt(f.val())-1)};return u.on("click",function(){x();var e=i({subtract:1});r(e)}),p.on("click",function(){g();var e=i();r(e)}),c.on("click",function(){var e=i();r(e),f.val(1),w()}),f.on("change",function(){(parseInt($(this).val())<=0||parseInt($(this).val())<=1||""===$(this).val())&&y();var t=e(),n=a(),o=t-n;if(o>0)var s=i({qty:o});else{o=Math.abs(o);var s=i({qty:o,subtract:1})}r(s)}),f.on("focus keydown",function(){n()}),h.on("submit",function(){return!1}),this},$(".product").each(function(){$(this).product()})});