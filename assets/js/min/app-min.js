jQuery(document).ready(function($){function e(e,t){this.options={elem:$(".account-login"),btnRaw:".overlayBtn"},this.options.elemOverlay=this.options.elem.find(".overlay"),this.options.overlayBtn=this.options.elem.find(".overlayBtn");var a=this;a.overlayVisible=!1,$.extend(this.options,e);var n=function(){"function"==typeof t&&t();var e=a.options.elemOverlay.data("height");a.overlayVisible=!0,TweenMax.to(a.options.elemOverlay,.6,{height:e,force3D:!0,onComplete:function(){}}),setTimeout(function(){a.overlayVisible===!0&&$("body").on("click",function(e){console.log("elemOverlay: ",a.options.elemOverlay),console.log("targetElement: ",e.target),e.target==a.options.elemOverlay||a.options.elemOverlay.has(e.target).length||(o(),$("body").off())})},200)},o=function(){a.overlayVisible=!1,TweenMax.to(a.options.elemOverlay,.3,{height:0,force3D:!0,onComplete:function(){}})},i=function(){return a.options.elemOverlay.data("height")||(a.options.elemOverlay.css("display","block"),a.options.elemOverlay.data("height",a.options.elemOverlay.height()),a.options.elemOverlay.css("height",0)),a.options.elemOverlay.data("height")},r=function(){i(),a.options.overlayBtn.on("click",function(){a.overlayVisible===!1?n():o()})};r()}var t=t||{};t.SideMenu=function(){var e=$(".side-menu"),t=this,a=$("body"),n=$("html"),o=e.find(".dropdown");if(!(e.length<=0)){var i=function(){o.on("mouseenter",function(){s($(this))}).on("mouseleave",function(){l($(this))}),o.children("a").on("click",function(e){e.preventDefault()})},r=function(e){var t=parseInt(a.scrollTop()),o=parseInt(n.get(0).clientHeight),i=parseInt(e.parent().offset().top),r=e.height(),s=i-t;e.css("margin-top",0);var l=s+r>o?!0:!1;l===!1?e.css("margin-top",0):e.css("margin-top",-.5*s)},s=function(e){var t=e,a=t.find("ul");TweenMax.set(a,{display:"block",autoAlpha:0,xPercent:"-10%"}),TweenMax.to(a,.3,{autoAlpha:1,xPercent:"0%"}),r(a)},l=function(e){var t=e,a=t.find("ul");TweenMax.to(a,.3,{autoAlpha:0,xPercent:"-10%",onComplete:function(){TweenMax.to(a,.1,{display:"none"})}})};i()}}(),t.nav=function(){var e=$(".nav"),t=$(".menu-wrapper"),a=new TimelineMax({yoyo:!0,paused:!0}),n=!1;a.set(e,{display:"block",autoAlpha:0,yPercent:"-10%"}).to(e,1,{autoAlpha:1,yPercent:"0%",ease:Expo.easeInOut});var o=function(){t.on("click",function(){n===!1?i():r()}).on("mouseover",function(){i()}),e.on("mouseleave",function(){r()})},i=function(){a.play(),n=!0,setTimeout(function(){n===!0&&$("body").on("click",function(t){t.target==e||e.has(t.target).length||(r(),$("body").off())})},200)},r=function(){a.reverse(),n=!1};o()}();var a=$(".account-login"),n=new e({elem:a,overlayBtn:a.find(".overlayBtn"),elemOverlay:a.find(".overlay")}),o=$(".mini-cart"),i=new e({elem:o,overlayBtn:o.find(".mini-cart_icon"),elemOverlay:o.find(".mini-cart_overlay")},function(){o.find(".mini-cart_overlay").data("height",1e3)});t.repositionTopMenu=function(){var e=$(".header"),t=e.find(".menu-wrapper"),a=e.find(".nav"),n=parseInt(t.height()+parseInt(e.css("padding-bottom"))),o=$(".secondary-menu").length>0?$(".secondary-menu"):e.width()/4;"Smartphone"===WURFL.form_factor&&(o=e.width())}(),t.resizeMenu=function(){var e=$(".header"),t=e.find(".nav");winHeight=$(window).height(),availableHeight=parseInt(winHeight-e.outerHeight()),console.log(availableHeight),t.css({"max-height":availableHeight+"px"})}();var r=$(".featured-categories").find(".owl-carousel"),s=$(".main-banner");s.owlCarousel({items:1}),WURFL.is_mobile&&"Desktop"!==WURFL.form_factor?r.owlCarousel({lazyLoad:!0,center:!0,loop:!0,dots:!0,animateOut:!0,itemElement:"a",animateIn:!0,responsive:{0:{items:2,margin:0,center:!0,loop:!1},600:{items:3,center:!1},1e3:{items:5,center:!1}}}):r.removeClass("owl-carousel"),$(".promotion-carousel").owlCarousel({lazyLoad:!0,center:!0,autoplay:!1,autoplayHoverPause:!0,smartSpeed:500,fluidSpeed:500,responsiveRefreshRate:10,animateIn:!0,animateOut:!0,dots:!0,responsive:{0:{stagePadding:0,items:1,margin:0,center:!0},600:{items:2,center:!1,stagePadding:0}}});var l=$(".mobile-search-icon"),c=$(".search_wrapper");l.on("click",function(){c.hasClass(".s-hide")?TweenMax.addClass("s-hide"):(TweenMax.to(c,1,{className:"-=s-hide"}),c.focus())}),$(".header").stickyNavbar({animDuration:350,animateCSS:!0,stickyModeClass:"sticky",mobile:!0,zindex:500});var u=$(".newsletterForm");u.on("submit",function(e){var t=$(this),a=t.attr("action"),a=a.replace("newsletter/subscriber/new","newsletter/subscriber/newAjax");data=t.serialize(),$.ajax({url:a,data:data,dataType:"json",method:"POST",beforeSend:function(){t.find('input[name="submit"]').val("...")}}).done(function(e){var t=$(".newsletter-message-box");t.find("p").text(e.message),TweenMax.set(t,{display:"block",autoAlpha:0,yPercent:"30%"}),TweenMax.to(t,1,{autoAlpha:1,yPercent:"0%",ease:Elastic.easeOut}),setTimeout(function(){TweenMax.to(t,1,{autoAlpha:0,yPercent:"30%",ease:Elastic.easeIn})},5e3)}).complete(function(){t.find('input[name="submit"]').val("Signup")}),e.preventDefault()}),$(".newsletter-message-box").find(".closeBtn").on("click",function(){var e=$(this).parent();TweenMax.to(e,1,{autoAlpha:0,yPercent:"30%",ease:Elastic.easeIn})}),$.fn.product=function(){function e(){return y.attr("data-newvalue",parseInt(v.val())),t()}function t(){return y.attr("data-newvalue")}function a(){y.attr("data-oldvalue",parseInt(v.val()))}function n(){return y.attr("data-oldvalue")}function o(e){return e&&parseInt(e)>0?e:1}function i(e){var t={subtract:0,qty:1};$.extend(t,e);for(var a=y.serializeArray(),n=0;n<a.length;n++)"qty"===a[n].name&&(t.qty?a[n].value=t.qty:a[n].value=0);return a.push({name:"isAjax",value:1}),a.push({name:"fromList",value:1}),parseInt(y.attr("updateid"))>0&&a.push({name:"updateid",value:y.attr("updateid")}),1===t.subtract&&a.push({name:"subtract",value:1}),$.param(a)}function r(){var e=I.qty;return console.log(e),0===e?void clearInterval(startProcessing):(s(e>0?i({qty:e}):i({qty:Math.abs(e),subtract:1})),void(I.qty=0))}function s(e){var t=y.attr("action"),a=parseInt(y.find(".product_qty").val());t=t.replace("checkout/cart","ajax/index"),$.ajax({url:t,dataType:"json",type:"get",data:e,success:function(e){c(e),y.attr("data-added",!0),y.attr("data-lastvalue",a),e.updateId&&y.attr("updateid",e.updateId)}}),console.log(I),$.when.apply($,I)}function l(){var e=y.attr("action"),t=y.attr("data-update-url");e=t;var a=y.serialize();a+="&isAjax=1";try{$.ajax({url:e,dataType:"json",type:"post",data:a,success:function(e){}})}catch(n){}}function c(e){$(".mini-cart")&&($(".mini-cart").find(".minicart-count").html($(e.sidebar).find(".minicart-count").html()),$(".mini-cart").find(".mini-cart_overlay").html($(e.sidebar).find(".mini-cart_overlay").html()))}var u=this.find(".icon-add-cart"),d=this.find(".icon-remove"),p=this.find(".icon-add"),f=this.find(".product_form"),v=this.find(".product_qty"),h=this.find(".product_options"),m=this.find(".product_add-cart"),y=this.find("form"),g=function(){TweenMax.to(f,.1,{xPercent:"10%",autoAlpha:0}),TweenMax.to(m,.3,{yPercent:"0%",autoAlpha:1}),h.length>0&&TweenMax.to(h,.6,{autoAlpha:0})},w=function(){TweenMax.to(m,.1,{yPercent:"10%",autoAlpha:0}),TweenMax.fromTo(f,.3,{xPercent:"10%",autoAlpha:0},{xPercent:"0%",autoAlpha:1}),h.length>0&&TweenMax.to(h,.6,{autoAlpha:1})},b=function(){(0===parseInt(v.val())||""===v.val())&&v.val(1),v.val(parseInt(v.val())+1)},x=function(){1===parseInt(v.val())?(g(),setTimeout(function(){v.val(0)},300)):parseInt(v.val())>0&&v.val(parseInt(v.val())-1)};d.on("click",function(){x(),startProcessing&&clearInterval(startProcessing),I.qty-=1,startProcessing=setInterval(r,500)}),p.on("click",function(){startProcessing&&clearInterval(startProcessing),b(),I.qty+=1,startProcessing=setInterval(r,500)}),u.on("click",function(){I.qty+=1,v.val(1),startProcessing=r(),w()}),v.on("change",function(){(parseInt($(this).val())<=0||parseInt($(this).val())<=1||""===$(this).val())&&g();var t=e(),a=n(),o=t-a;if(o>0)var r=i({qty:o});else{o=Math.abs(o);var r=i({qty:o,subtract:1})}s(r)}),v.on("focus keydown",function(){a()});var I={qty:0};return y.on("submit",function(){return!1}),this},$(".product").each(function(){$(this).product()})});