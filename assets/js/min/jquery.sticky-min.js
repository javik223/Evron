!function(t){t.fn.sticky=function(e){var s={offset:20,mode:"fixed",stopper:"",speed:500,classes:{element:"jquery-sticky-element",start:"jquery-sticky-start",sticky:"jquery-sticky-sticky",stopped:"jquery-sticky-stopped",placeholder:"jquery-sticky-placeholder"},onStick:"",onStart:"",onStop:""};this.each(function(){if(e&&t.extend(s,e),!t(this).parent().hasClass(s.classes.element)){var o={init:function(e){if(o.element=e.wrap('<div class="'+s.classes.element+'" />').parent(),o.units={start:o.element.offset().top},s.states=[s.classes.start,s.classes.sticky,s.classes.stopped].join(" "),""!=s.stopper){var n=t(s.stopper),p;if(n.length>0)for(i=0;i<n.length&&"undefined"==typeof o.stopper;i++)t(n[i]).offset().top>o.element.offset().top+o.element.outerHeight(!1)&&(o.stopper=t(n[i]));"undefined"!=typeof o.stopper&&o.stopper.length>0&&(p=parseInt(o.stopper.css("margin-top"))||0,o.units.stop=o.stopper.offset().top-p)}o.placeholder=o.element.clone().empty().attr("class",s.classes.placeholder).css({opacity:0,height:o.element.height()}).insertBefore(o.element),o.element.appendTo("body").css({width:o.placeholder.width(),left:o.placeholder.offset().left,top:o.placeholder.offset().top,"margin-bottom":"0px",position:"absolute","z-index":"999"}),t(window).bind("resize scroll",function(){o.update()}),o.update()},update:function(){var e;o.element.css({width:o.placeholder.width(),left:o.placeholder.offset().left}),o.placeholder.css("height",o.element.height()),o.units.start=o.placeholder.offset().top,o.element.outerHeight(!1)+s.offset<t(window).height()?(o.units.doctop=t(document).scrollTop(),o.element.hasClass(s.classes.sticky)&&"animate"==s.mode&&o.animate(o.units.doctop+s.offset),"undefined"!=typeof o.stopper&&o.stopper.length>0&&(e=parseInt(o.stopper.css("margin-top"))||0,o.units.stop=o.stopper.offset().top-e),!o.element.hasClass(s.classes.stopped)&&"undefined"!=typeof o.stopper&&o.stopper.length>0&&o.units.doctop+s.offset+o.element.outerHeight(!1)>=o.units.stop?(o.stop(o.units.stop-o.element.outerHeight(!1),"stop"),"function"==typeof s.onStop&&s.onStop()):!o.element.hasClass(s.classes.sticky)&&o.units.doctop>o.units.start-s.offset&&("undefined"==typeof o.stopper||0==o.stopper.length||o.stopper.length>0&&o.units.doctop+s.offset+o.element.outerHeight(!1)<o.units.stop)?(o.stick(s.offset),"animate"==s.mode&&o.animate(o.units.doctop+s.offset),"function"==typeof s.onStick&&s.onStick()):o.units.doctop<=o.units.start-s.offset&&(o.stop(o.units.start,"start"),"function"==typeof s.onStart&&s.onStart())):o.element.hasClass(s.classes.start)||o.stop(o.units.start,"start")},animate:function(t){clearTimeout(o.timer),o.timer=setTimeout(function(){t>=o.units.stop?t=o.units.stop-o.element.outerHeight(!1):t<=o.units.start&&(t=o.units.start),o.element.stop().animate({top:t},s.speed)},100)},stick:function(t){o.element.removeClass(s.states).addClass(s.classes.sticky),"fixed"==s.mode&&o.element.css({top:t,position:"fixed"})},stop:function(t,e){o.element.removeClass(s.states).addClass("start"==e?s.classes.start:s.classes.stopped),"fixed"==s.mode?o.element.css({top:t,position:"absolute"}):o.animate("start"==e?o.units.start:o.units.stop-o.element.outerHeight(!1))}};o.init(t(this))}})}}(jQuery);